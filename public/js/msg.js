let MSGS = {
  '#blk-motion#': {
    en: 'Motion',
    tlh: 'mo\'Qoq',
    es: 'Movimiento',
    fr: 'Mouvement',
  },
  '#blk-motor#': {
    en: 'Motor',
    tlh: 'nguSDI\'',
    es: 'Motor',
    fr: 'Moteur',
  },
  '#blk-sensors#': {
    en: 'Sensors',
    tlh: 'ghe\'\'or',
    es: 'Sensores',
    fr: 'Capteurs',
  },
  '#blk-sound#': {
    en: 'Sound',
    tlh: 'wab',
    es: 'Sonido',
    fr: 'Sons',
  },
  '#blk-control#': {
    en: 'Control',
    tlh: 'SeH',
    es: 'Control',
    fr: 'Contrôle',
  },
  '#blk-logic#': {
    en: 'Logic',
    tlh: 'wanl\'',
    es: 'Logica',
    fr: 'Logique',
  },
  '#blk-loops#': {
    en: 'Loops',
    tlh: 'QoQ',
    es: 'Bucles',
    fr: 'Boucles',
  },
  '#blk-math#': {
    en: 'Math',
    tlh: 'ma\'rIch',
    es: 'Matematica',
    fr: 'Maths',
  },
  '#blk-text#': {
    en: 'Text',
    tlh: 'wej',
    es: 'Texto',
    fr: 'Texte',
  },
  '#blk-lists#': {
    en: 'Lists',
    tlh: 'tlhegh',
    es: 'Listas',
    fr: 'Listes',
  },
  '#blk-variables#': {
    en: 'Variables',
    tlh: 'qeylIS',
    es: 'Variables',
    fr: 'Variables',
  },
  '#blk-functions#': {
    en: 'Functions',
    tlh: 'tlhaw\'DIyuS',
    es: 'Funciones',
    fr: 'Fonctions',
  },
  '#blk-when_started#': {
    en: 'When Started',
    es: 'Al comenzar',
    fr: 'Au démarrage',
  },
  '#blk-sleep_for#': {
    en: 'sleep for',
    fr: 'attendre jusqu\'à',
  },
  '#blk-seconds#': {
    en: 'seconds',
    fr: 'secondes',
  },
  '#blk-milliseconds#': {
    en: 'milliseconds',
    fr: 'millisecondes',
  },
  '#blk-stop_moving_and#': {
    en: 'stop moving and',
    fr: 'arrêter d\'avancer et',
  },
  '#blk-brake#': {
    en: 'brake',
    fr: 'freiner',
  },
  '#blk-coast#': {
    en: 'coast',
    fr: 'côté',
  },
  '#blk-hold#': {
    en: 'hold',
    fr: 'tenir',
  },
  '#blk-stop_motor_on_port#': {
    en: 'stop motor on port',
    fr: 'arrêter le moteur sur le port',
  },
  '#blk-and#': {
    en: 'and',
    fr: 'et',
  },
  '#blk-move_steering_with_direction#': {
    en: 'move steering with direction',
    fr: 'avancer dans la direction de',
  },
  '#blk-and_speed#': {
    en: 'and speed',
    fr: 'et vitesse',
  },
  '#blk-degrees#': {
    en: 'degrees',
    fr: 'degrés',
  },
  '#blk-rotations#': {
    en: 'rotations',
    fr: 'rotations',
  },
  '#blk-move_steering_tooltip#': {
    en: 'direction ranges from -100 (left) to 0 (straight) to 100 (right)',
    fr: 'direction comprise entre -100 (gauche), par 0 (tout droit), à 100 (droite)',
  },
  '#blk-for#': {
    en: 'for',
    fr: 'pour',
  },
  '#blk-exit_program#': {
    en: 'exit program',
    fr: 'sortie du programme',
  },
  '#blk-position_of_motor_on_port#': {
    en: 'position of motor on port',
    fr: 'position du moteur sur le port',
  },
  '#blk-in_degrees#': {
    en: 'in degrees',
    fr: 'en degrés',
  },
  '#blk-speed_of_motor_on_port#': {
    en: 'speed of motor on port',
    fr: 'vitesse du moteur sur le port',
  },
  '#blk-reset_position_of_motor_on_port#': {
    en: 'reset position of motor on port',
    fr: 'réintialiser la position du moteur sur le port',
  },
  '#blk-both_wheels#': {
    en: 'Both wheels',
    fr: 'toutes les roues',
  },
  '#blk-left_wheel#': {
    en: 'Left Wheel',
    fr: 'roue gauche',
  },
  '#blk-right_wheel#': {
    en: 'Right Wheel',
    fr: 'roue droite',
  },
  '#blk-move_tank_with_left_speed#': {
    en: 'move tank with left speed',
    fr: 'avancer le tank avec une vitesse à gauche de',
  },
  '#blk-and_right_speed#': {
    en: 'and right speed',
    fr: 'et une vitesse à droite de',
  },
  '#blk-color_sensor#': {
    en: 'color_sensor',
    fr: 'capteur de couleurs',
  },
  '#blk-on_port#': {
    en: 'on port',
    fr: 'sur le port',
  },
  '#blk-reflected_light_intensity#': {
    en: 'reflected light intensity',
    fr: 'intensité lumineuse réfléchie',
  },
  '#blk-color#': {
    en: 'color',
    fr: 'couleur',
  },
  '#blk-color_name#': {
    en: 'color name',
    fr: 'nom de la couleur',
  },
  '#blk-red#': {
    en: 'red',
    fr: 'rouge',
  },
  '#blk-green#': {
    en: 'green',
    fr: 'vert',
  },
  '#blk-blue#': {
    en: 'blue',
    fr: 'bleu',
  },
  '#blk-rgb#': {
    en: 'rgb (list)',
    fr: 'rvb (liste)',
  },
  '#blk-ultrasonic_distance_on_port#': {
    en: 'ultrasonic distance on port',
    fr: 'télémètre à ultrasons sur le port',
  },
  '#blk-in#': {
    en: 'in',
    fr: 'entrée',
  },
  '#blk-gyro#': {
    en: 'gyro',
    fr: 'gyroscope',
  },
  '#blk-angle#': {
    en: 'angle',
    fr: 'angle',
  },
  '#blk-rate#': {
    en: 'rate',
    fr: 'cadence',
  },
  '#blk-reset_gyro_on_port#': {
    en: 'reset gyro on port',
    fr: 'réinitialiser le gyroscope sur le port',
  },
  '#blk-run_motor_on_port#': {
    en: 'run motor on port',
    fr: 'faire tourner le moteur sur le port',
  },
  '#blk-at#': {
    en: 'at',
    fr: 'à',
  },
  '#blk-run_motor_tooltip#': {
    en: 'motor will continue running until given a different command',
    fr: 'le moteur va continuer de tourner tant qu\'il n\'y a pas de nouvelle commande',
  },
  '#blk-to_position#': {
    en: 'to position',
    fr: 'à la position',
  },
  '#blk-say#': {
    en: 'say',
    fr: 'dire',
  },
  '#blk-and_dont_wait#': {
    en: 'and don\'t wait',
    fr: 'aet ne pas attendre',
  },
  '#blk-and_wait#': {
    en: 'and wait for completion',
    fr: 'et attendre jusqu\'à la fin',
  },
  '#blk-say_tooltip#': {
    en: 'Speak the string using text-to-speech',
    fr: 'Prononce la phrase par la synthèse vocale',
  },
  '#blk-beep#': {
    en: 'beep',
    fr: 'bippe',
  },
  '#blk-play_tone_at#': {
    en: 'play tone at',
    fr: 'jouer le ton à',
  },
  '#blk-time#': {
    en: 'time',
    fr: 'temps',
  },
  '#blk-time_tooltip#': {
    en: 'Current Unix time in seconds',
    fr: 'Actuel temps Unix en secondes',
  },
  '#blk-altitude#': {
    en: 'altitude',
    fr: 'altitude',
  },
  '#blk-position#': {
    en: 'position (list)',
    fr: 'position (liste)',
  },
  '#blk-gps_tooltip#': {
    en: 'Virtual sensor that provides the robot\'s position',
    fr: 'Capteur virtuel de position du robot',
  },
  '#main-blocks#': {
    en: 'Blocks',
    tlh: 'Porgh',
    es: 'Bloques',
    fr: 'Blocs',
  },
  '#main-sim#': {
    en: 'Simulator',
    tlh: 'ghertlhuD',
    es: 'Simulador',
    fr: 'Simulateur',
  },
  '#main-file#': {
    en: 'File',
    tlh: 'teywI\'',
    es: 'Archivo',
    fr: 'Fichier',
  },
  '#main-new_program#': {
    en: 'New Program',
    fr: 'Nouveau programme',
  },
  '#main-load_blocks#': {
    en: 'Load blocks from your computer',
    fr: 'Téléverser une sauvegarde depuis l\'ordinateur',
  },
  '#main-import_functions#': {
    en: 'Import functions from blocks file',
    fr: 'Importer une fonctions depuis une sauvegarde',
  },
  '#main-save_blocks#': {
    en: 'Save blocks to your computer',
    fr: 'Télécharge une sauvegarde',
  },
  '#main-load_python#': {
    en: 'Load Python from your computer',
    fr: 'Téléverser un script Python depuis l\'ordinateur',
  },
  '#main-save_python#': {
    en: 'Save Python to your computer',
    fr: 'Télécharge le script Python',
  },
  '#main-load_python_lib#': {
    en: 'Load Python module from your computer',
  },
  '#main-save_python_lib#': {
    en: 'Save Python module to your computer',
  },
  '#main-export_zip#': {
    en: 'Export zip package to your computer',
    fr: 'Exporter une archive zip',
  },
  '#main-start_new_warning#': {
    en: 'Starting a new program will cause all unsaved work to be lost.',
    fr: 'Commencer un nouveau programme fera perdre tout le travail non sauvegardé.',
  },
  '#main-functions_imported': {
    en: 'Functions imported',
    fr: 'Fonctions importées',
  },
  '#main-robot#': {
    en: 'Robot',
    tlh: 'qoq',
    es: 'Robot',
    fr: 'Robot',
  },
  '#main-select_robot#': {
    en: 'Select Robot',
    fr: 'Sélectionner un robot',
  },
  '#main-robot_configurator#': {
    en: 'Robot Configurator (experimental)',
    fr: 'Configurateur de robot (expérimental)',
  },
  '#main-robot_load_file#': {
    en: 'Load from file',
    fr: 'Ouvrir un fichier',
  },
  '#main-robot_save_file#': {
    en: 'Save to file',
    fr: 'Enregistrer dans un fichier',
  },
  '#main-display_position#': {
    en: 'Display current position',
    fr: 'Afficher la position actuelle',
  },
  '#main-save_position#': {
    en: 'Save current position to settings',
    fr: 'Sauvegarder la position actuelle comme paramètre',
  },
  '#main-clear_position#': {
    en: 'Clear position in settings',
    fr: 'Réinitialiser la position dans les paramètres',
  },
  '#main-robot_position#': {
    en: 'Robot Position',
    fr: 'Position du robot',
  },
  '#main-position#': {
    en: 'Position',
    fr: 'Position',
  },
  '#main-rotation#': {
    en: 'Rotation',
    fr: 'Rotation',
  },
  '#main-degrees#': {
    en: 'degrees',
    fr: 'degrés',
  },
  '#main-cannot_save_position#': {
    en: 'Current world doesn\'t allow saving of position',
    fr: 'L\'univers actuel ne permet pas de sauvegarder la position',
  },
  '#main-cannot_save_rotation#': {
    en: 'Current world doesn\'t allow saving of rotation',
    fr: 'L\'univers actuel ne permet pas de sauvegarder la rotation',
  },
  '#main-arena#': {
    en: 'Arena',
    tlh: '\'anSa\'',
    es: 'Pista',
    fr: 'Arène',
  },
  '#main-help#': {
    en: 'Help',
    tlh: 'QaH',
    es: 'Ayuda',
    fr: 'Aide',
  },
  '#main-about#': {
    en: 'About',
    fr: 'A propos',
  },
  '#main-arenaTitle#': {
    en: 'GearsBot Arena',
    tlh: 'GearsBot \'anSa\'',
    es: 'Pista GearsBot',
    fr: 'Arène GearsBot',
  },
  '#main-arenaDescription#': {
    en:
      '<p>The GearsBot Arena allows up to 4 robots to compete or cooperate with each other.</p>' +
      '<p>Program your robot using the normal GearsBot page (...where you are now), and export your program and robot as a zip package (Files -> Export Zip...).' +
      'You can then load the zip package into the GearsBot Arena and run it against other players.</p>',
    tlh:
      '<p>veSDuj Data\' \'e\' vIQoy.</p>' +
      '<p>tugh tlhIHtaHghach chutmey pabnIS. chol *ma\'rIgharet*, qaSpa\' je tlhIH.' +
      'tIqDu\'lIjDaq yIlan.</p>',
    es:
      '<p>La Pista GearsBot permite hasta 4 robots para competir o colaborar uno con el otro.</p>' +
      '<p>Programa tu robot usando la página principal de GearsBot (...donde te encuentras ahora), y exporta tu programa y robot como un archivo zip. (Archivo -> Exportar Zip...).' +
      'Entonces puedes cargar el archivo zip en la Pista GearsBot y ejecutarlo contra otros jugadores.</p>',
    fr:
      '<p>L\'arène GearsBot permet de faire collaborer ou de s\'affronter jusqu\'à 4 robots simultanément.</p>' +
      '<p>Programmez votre robot depuis la page principale (...celle-ci donc), et expoertez votre programme et votre robot comme un paquet zip (Fichier -> Export Zip...).' +
      'Vous pouvez charger le paquet zip dans l\'arène GearsBot et le lancer contre les autres joueurs.</p>',
  },
  '#main-arenaGo#': {
    en: 'Go to Arena',
    tlh: 'yIghoS',
    es: 'Ir a la Pista',
    fr: 'En route pour l\'arène',
  },
  '#main-configurator_title#': {
    en: 'GearsBot Robot Configurator',
    fr: 'GearsBot configurateur de robot'
  },
  '#main-configurator_description#': {
    en:
      '<p>The GearsBot Robot Configurator allows you to customize an existing robot or create a new robot design.</p>' +
      '<p>After you have completed your customization, save your creation to file and return here to load it.</p>',
    fr:
      '<p>Le configurateur de robot GearsBot permet de personnaliser un robot déjà existant ou d\'en créer un nouveau..</p>' +
      '<p>Quand votre personnalisation est finie, sauvergardez votre création dans un fichier et revenir ici pour le charger.</p>',
  },
  '#main-configurator_go#': {
    en: 'Go to Configurator',
    fr: 'Aller au configurateur',
  },
  '#sim-world#': {
    en: 'World',
    fr: 'Univers',
  },
  '#sim-reset#': {
    en: 'Reset',
    fr: 'Réinitialisation',
  },
  '#sim-sensors#': {
    en: 'Sensors',
    fr: 'Capteurs',
  },
  '#sim-follow#': {
    en: 'Follow',
    fr: 'Suivre',
  },
  '#sim-top#': {
    en: 'Top',
    fr: 'Haut',
  },
  '#sim-arc#': {
    en: 'Arc',
    fr: 'Arc',
  },
  '#sim-alt#': {
    en: 'Alt', // Short for altitude
    fr: 'Altitude',
  },
  '#sim-distance#': {
    en: 'Distance',
    fr: 'Distance',
  },
  '#sim-angle#': {
    en: 'Angle',
    fr: 'Angle',
  },
  '#sim-color_sensor#': {
    en: 'Color Sensor',
    fr: 'Capteur de couleur',
  },
  '#sim-red#': {
    en: 'Red',
    fr: 'Rouge',
  },
  '#sim-green#': {
    en: 'Green',
    fr: 'Vert',
  },
  '#sim-blue#': {
    en: 'Blue',
    fr: 'Bleu',
  },
  '#sim-intensity#': {
    en: 'Intensity (%)',
    fr: 'Intensité (%)',
  },
  '#sim-ultrasonic#': {
    en: 'Ultrasonic Sensor',
    fr: 'Télémètre à ultrasons',
  },
  '#sim-distance#': {
    en: 'Distance',
    fr: 'Distance',
  },
  '#sim-gyro#': {
    en: 'Gyro Sensor',
    fr: 'Gyroscope',
  },
  '#sim-angle#': {
    en: 'Angle (degrees)',
    fr: 'Angle (degrés)',
  },
  '#sim-gps#': {
    en: 'GPS Sensor',
    fr: 'Capteur GPS',
  },
  '#sim-altitude#': {
    en: 'Altitude (cm)',
    fr: 'Altitude (cm)',
  },
  '#sim-laser#': {
    en: 'Laser Range Sensor',
    fr: 'Télémètre laser',
  },
  '#sim-left_motor#': {
    en: 'Left Motor',
    fr: 'Moteur gauche',
  },
  '#sim-position#': {
    en: 'Position (degrees)',
    fr: 'Position (degrés)',
  },
  '#sim-right_motor#': {
    en: 'Right Motor',
    fr: 'Moteur droit',
  },
  '#sim-arm#': {
    en: 'Arm Actuator',
    fr: 'Actionneur du bras',
  },
  '#sim-swivel#': {
    en: 'Swivel Actuator',
    fr: 'Tourelle',
  },
  '#sim-paintball#': {
    en: 'Paintball Launcher Actuator',
    fr: 'Lanceur de paintball',
  },
  '#sim-save#': {
    en: 'Save',
    fr: 'Sauvegarder',
  },
  '#sim-load#': {
    en: 'Load',
    fr: 'Charger',
  },
  '#sim-default#': {
    en: 'Default',
    fr: 'Par défaut',
  },
  '#sim-cancel#': {
    en: 'Cancel',
    fr: 'Abandonner',
  },
  '#sim-ok#': {
    en: 'Ok',
    fr: 'Ok',
  },
  '#sim-select_world#': {
    en: 'Select World',
    fr: 'Sélectionner votre univers',
  },
  '#sim-invalid_map#': {
    en: 'Invalid map configurations',
    fr: 'Configuration de la carte invalide',
  },
  '#blockly-save#': {
    en: 'Save Now',
    fr: 'Enregistrer maintenant',
  },
  '#blockly-add_page#': {
    en: 'Add Page',
    fr: 'Ajouter une page',
  },
  '#blockly-copy_page#': {
    en: 'Copy Current Page',
    fr: 'Copier la page en cours',
  },
  '#blockly-rename_page#': {
    en: 'Rename Current Page',
    fr: 'Renommer la page en cours',
  },
  '#blockly-delete_page#': {
    en: 'Delete Current Page',
    fr: 'Effacer la page en cours',
  },
  '#blockly-new_page_name#': {
    en: 'New page name',
    fr: 'Nom de la nouvelle page',
  },
  '#blockly-page_name#': {
    en: 'Page name',
    fr: 'Nom de la page',
  },
  '#blockly-is_in_use#': {
    en: 'is already in use',
    fr: 'est déjà utilisé',
  },
  '#blockly-page#': {
    en: 'Page',
    fr: 'Page',
  },
  '#blockly-added#': {
    en: 'added',
    fr: 'ajouté',
  },
  '#blockly-copy_to_page_name#': {
    en: 'Copy to page name',
    fr: 'Copier en nom de page',
  },
  '#blockly-copied_to#': {
    en: 'copied to',
    fr: 'copié vers',
  },
  '#blockly-cannot_rename_main#': {
    en: 'Cannot rename Main page',
    fr: 'Impossible de renommer la page principale',
  },
  '#blockly-new_page_name#': {
    en: 'New page name',
    fr: 'Nom de la nouvelle page',
  },
  '#blockly-is_in_use#': {
    en: 'is already in use',
    fr: 'est déjà utilisé',
  },
  '#blockly-cannot_delete_main#': {
    en: 'Cannot delete Main page',
    fr: 'Impossible de supprimer la page principale',
  },
  '#blockly-delete#': {
    en: 'Delete',
    fr: 'Supprimer',
  },
  '#blockly-all_blocks_lost_warning#': {
    en: 'All blocks on page will be lost.',
    fr: 'Tous les blocs sur la page seront perdus.',
  },
  '#blockly-enable_blocks#': {
    en: 'Enable Blocks Mode',
    fr: 'Passer en mode Blocs',
  },
  '#blockly-python_lost_warning#': {
    en: 'Enabling blocks mode will cause all Python changes to be lost.',
    fr: 'Passer en mode Blocs fera perdre toutes les modifications dans le code Python.',
  },
  '#python-save#': {
    en: 'Save Now',
    fr: 'Enregistrer maintenant',
  },
  '#python-warning#': {
    en: 'Warning!',
    fr: 'Attention!',
  },
  '#python-cannot_change_back_warning#': {
    en: 'Changes to Python code cannot be converted back into blocks!',
    fr: 'Les modifications faites dans le code Python ne pourront pas être converties en blocs !',
  },
};
let MSGS_KEYS = Object.keys(MSGS);

let LANG = localStorage.getItem('LANG');
if (!LANG || LANG == '' || LANG == 'undefined') {
  LANG = 'en';
}

var i18n = new function() {
  var self = this;

  // Append to messages
  this.append = function(msgs) {
    MSGS = Object.assign(MSGS, msgs);
    MSGS_KEYS = Object.keys(MSGS);
  };

  // Get a single string
  this.get = function(requestedKey) {
    let messages = MSGS[requestedKey];
    if (typeof messages == 'undefined') {
      return requestedKey;
    }
    let message = messages[LANG]
    if (typeof message == 'undefined') {
      if (typeof messages['en'] == 'undefined') {
        return requestedKey;
      } else {
        return messages['en'];
      }
    }
    return message;
  };

  // Change all keys in provided string
  this.replace = function(input) {
    let regEx = '';
    for (key of MSGS_KEYS) {
      regEx += key + '|';
    }
    regEx = regEx.slice(0, regEx.length - 1);
    regEx = new RegExp(regEx, 'g');
    return input.replace(regEx, function(key){
      return self.get(key);
    })
  }
}
